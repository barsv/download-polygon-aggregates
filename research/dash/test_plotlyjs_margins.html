<!DOCTYPE html>
<html>
<head>
    <title>Plotly.js Margins Test</title>
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
</head>
<body>
    <h1>Pure plotly.js with Margins Test</h1>
    
    <h3>1. No margins (baseline)</h3>
    <div id="plot1" style="width:100%;height:400px;"></div>
    
    <h3>2. With margins (same as Python version)</h3>
    <div id="plot2" style="width:100%;height:400px;"></div>
    
    <h3>3. With margins + height (full Python config)</h3>
    <div id="plot3" style="width:100%;height:520px;"></div>

    <script>
        // Generate test data (same as Python version)
        const N = 60000;
        const startTime = new Date('2024-01-01T00:00:00');
        const x = [];
        const y = [];
        
        let currentY = 0;
        for (let i = 0; i < N; i++) {
            x.push(new Date(startTime.getTime() + i * 1000)); // 1 second intervals
            currentY += (Math.random() - 0.5) * 0.5; // Random walk
            y.push(currentY);
        }
        
        const trace = {
            x: x,
            y: y,
            type: 'scatter',
            mode: 'lines',
            name: 'data'
        };
        
        // Plot 1: No margins
        const layout1 = {
            title: 'No margins',
            xaxis: {rangeslider: {visible: false}},
            dragmode: 'zoom'
        };
        
        const config = {
            scrollZoom: true,
            displayModeBar: true
        };
        
        Plotly.newPlot('plot1', [trace], layout1, config);
        
        // Plot 2: With margins (same as Python)
        const layout2 = {
            title: 'With margins l=0,r=0,t=10,b=0',
            margin: {l: 0, r: 0, t: 10, b: 0},
            xaxis: {rangeslider: {visible: false}},
            dragmode: 'zoom'
        };
        
        Plotly.newPlot('plot2', [trace], layout2, config);
        
        // Plot 3: Full Python config
        const layout3 = {
            title: 'Full config: margins + height + rangeslider + dragmode',
            margin: {l: 0, r: 0, t: 10, b: 0},
            height: 520,
            xaxis: {rangeslider: {visible: false}},
            dragmode: 'zoom'
        };
        
        Plotly.newPlot('plot3', [trace], layout3, config);
        
        console.log('All plots created. Test scroll zoom on each!');
    </script>
</body>
</html>
